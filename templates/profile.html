<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root{
            --bg-1: #e0eafc;
            --bg-2: #cfdef3;
            --glass: rgba(255,255,255,0.7);
            --accent: #667eea;
            --accent-2: #764ba2;
            --muted: #6c757d;
        }
        body {
            background: linear-gradient(135deg,var(--bg-1),var(--bg-2));
            min-height: 100vh;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #222;
            padding: 40px 12px;
        }

        .profile-container {
            max-width: 980px;
            margin: 0 auto;
            position: relative;
        }

        .floating-shape {
            position: absolute;
            width: 160px;
            height: 160px;
            border-radius: 24px;
            filter: blur(28px);
            opacity: 0.35;
            z-index: 0;
            transform: translate3d(0,0,0);
        }
        .shape-a{ background: linear-gradient(135deg,var(--accent),var(--accent-2)); top: -40px; left: -40px; }
        .shape-b{ background: linear-gradient(135deg,#f093fb,#f5576c); bottom: -40px; right: -40px; }

        .profile-card {
            position: relative;
            z-index: 2;
            background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.9));
            border-radius: 18px;
            box-shadow: 0 12px 40px rgba(44,62,80,0.12);
            overflow: hidden;
        }

        .profile-header{
            padding: 2.25rem 2rem 1.25rem 2rem;
            text-align: center;
            border-bottom: 1px solid rgba(0,0,0,0.06);
        }

        .profile-img-wrap{ display:inline-block; position: relative; }
        .profile-img{
            width:140px; height:140px; border-radius:50%; object-fit:cover; border:6px solid white;
            box-shadow: 0 8px 30px rgba(102,126,234,0.15);
            transition: transform .45s cubic-bezier(.2,.8,.2,1);
        }
        .profile-img-wrap:hover .profile-img{ transform: scale(1.06) rotate(-1deg); }

        /* animated ring */
        .avatar-ring{
            position:absolute; inset: -8px; border-radius:50%;
            background: conic-gradient(from 0deg, rgba(102,126,234,0.25), rgba(118,75,162,0.25));
            filter: blur(8px); z-index:-1; animation: ringRotate 8s linear infinite;
        }
        @keyframes ringRotate{ to { transform: rotate(360deg); } }

        .profile-name{ font-weight:700; margin-top:12px; font-size:1.45rem; }
        .profile-meta{ color:var(--muted); font-size:0.95rem; }

        .profile-body{ display:flex; gap:1.5rem; padding:1.75rem; align-items:flex-start; }

        .left-col{ flex: 0 0 320px; }
        .right-col{ flex: 1 1 auto; }

        .info-card{ background: rgba(255,255,255,0.6); border-radius:12px; padding:1rem; margin-bottom:1rem; }
        .info-row{ display:flex; justify-content:space-between; padding: .6rem 0; border-bottom:1px dashed rgba(0,0,0,0.04); }
        .info-row:last-child{ border-bottom:none; }

        .actions .btn{ min-width:140px; }

        .achievements{ display:flex; gap:10px; flex-wrap:wrap; }
        .badge-achv{ background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:white; padding:8px 12px; border-radius:999px; font-weight:600; }

        /* small responsive */
        @media(max-width:880px){ .profile-body{ flex-direction:column; } .left-col{ width:100%; } }
    </style>
</head>
<body>
    <div class="profile-container">
        <div class="floating-shape shape-a"></div>
        <div class="floating-shape shape-b"></div>

        <div style="margin-bottom:14px;">
            <a href="{{ url_for('student_home') }}" class="btn btn-sm btn-outline-secondary">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
        </div>

        <div class="profile-card" data-aos="fade-up" data-aos-duration="900">
            <div class="profile-header">
                <div class="profile-img-wrap">
                    {% if user and user.image_path and user.image_path != '' %}
                        <img src="{{ url_for('static', filename=user.image_path) }}" alt="Profile Picture" class="profile-img">
                    {% else %}
                        <div class="profile-img d-flex align-items-center justify-content-center" style="background:#f1f3f8;color:var(--muted);">
                            <i class="fas fa-user fa-4x"></i>
                        </div>
                    {% endif %}
                    <div class="avatar-ring"></div>
                </div>
                <div class="profile-name">{{ user.name if user else 'Student Name' }}</div>
                <div class="profile-meta">{{ user.student_id if user else '' }} Â· {{ user.class_year if user and user.class_year else 'Year N/A' }}</div>
            </div>

            <div class="profile-body">
                <div class="left-col">
                    <div class="info-card" data-aos="zoom-in" data-aos-delay="120">
                        <div class="info-row"><div class="info-label">Student ID</div><div class="info-value">{{ user.student_id if user else 'N/A' }}</div></div>
                        <div class="info-row"><div class="info-label">Full name</div><div class="info-value">{{ user.name if user else 'N/A' }}</div></div>
                        <div class="info-row"><div class="info-label">Class Year</div><div class="info-value">{{ user.class_year if user and user.class_year else 'Not provided' }}</div></div>
                        <div class="info-row"><div class="info-label">Department</div><div class="info-value">{{ user.department if user and user.department else 'Not provided' }}</div></div>
                    </div>

                    <!-- Action buttons removed per UI update: Edit Profile, View Dashboard, View Attendance -->
                </div>

                <div class="right-col">
                    <div class="info-card" data-aos="fade-left" data-aos-delay="150">
                        <h6 style="margin:0 0 .6rem 0;">Achievements</h6>
                        <div class="achievements">
                            {% if achievements %}
                                {% for a in achievements %}
                                    {% if a.earned %}
                                        <span class="badge-achv">{{ a.label }}</span>
                                    {% else %}
                                        <span class="badge-achv" style="opacity:0.45;filter:grayscale(0.4);">{{ a.label }}</span>
                                    {% endif %}
                                {% endfor %}
                            {% else %}
                                <span class="badge-achv">No achievements yet</span>
                            {% endif %}
                        </div>
                    </div>

                    <div class="info-card mt-3" data-aos="fade-left" data-aos-delay="200">
                        <h6 style="margin:0 0 .6rem 0;">About</h6>
                        <p class="text-muted small">This profile shows your basic information and achievements.</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init({ duration:800, easing:'ease-in-out', once:true });
    </script>
</body>
</html>
